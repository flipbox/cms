{"version":3,"sources":["AssetImageEditor.js"],"names":["Craft","AssetImageEditor","Garnish","Modal","extend","$body","$footer","$imageTools","$buttons","$cancelBtn","$replaceBtn","$saveBtn","$editorContainer","$straighten","$croppingCanvas","canvas","image","viewport","focalPoint","grid","croppingCanvas","clipper","croppingRectangle","cropperHandles","cropperGrid","croppingShade","imageStraightenAngle","viewportRotation","originalWidth","originalHeight","imageVerticeCoords","zoomRatio","animationInProgress","currentView","assetId","cacheBust","draggingCropper","scalingCropper","draggingFocal","previousMouseX","previousMouseY","shiftKeyHeld","editorHeight","editorWidth","cropperState","scaleFactor","flipData","focalPointState","croppingConstraint","renderImage","renderCropper","init","settings","this","Date","now","setSettings","defaults","x","y","$container","$","appendTo","$bod","base","t","allowSavingAsNew","addListener","saveImage","bind","proxy","removeListener","$shade","setMaxImageSize","postActionRequest","browserViewportWidth","$doc","get","documentElement","clientWidth","browserViewportHeight","clientHeight","maxImageSize","Math","max","loadEditor","data","html","alert","$tabs","$viewsContainer","$views","innerHeight","innerWidth","updateSizeAndPosition","fabric","StaticCanvas","width","height","enableRetinaScaling","requestAnimationFrame","renderAll","imageUrl","getActionUrl","size","Image","fromURL","imageObject","set","originX","originY","left","top","add","getHeight","getWidth","_setFittedImageVerticeCoordinates","_repositionEditorElements","focalState","imageDimensions","getScaledImageDimensions","offsetX","offsetY","focal","focalData","adjustedX","adjustedY","storeFocalPointState","_createFocalPoint","_createViewport","storeCropperState","_addControlListeners","_handleMouseMove","_handleMouseDown","_handleMouseUp","ev","first","trigger","window","css","min-width","min-height","addClass","removeClass","previousEditorDimensions","setDimensions","getZoomToFitRatio","previouslyOccupiedArea","_getBoundingRectangle","_repositionCropper","getZoomToCoverRatio","_repositionImage","_repositionViewport","_repositionFocalPoint","_zoomImage","Rect","fill","globalCompositeOperation","sizeFactor","focalX","focalY","deltaX","deltaY","Group","Circle","radius","strokeWidth","stroke","toggleFocalPoint","remove","dimensions","state","scaledImageDimensions","currentWidth","newWidth","ratio","hasOrientationChanged","imageRatio","editorRatio","min","round","rotateImage","flipImage","straighteningInput","SlideRuleInput","onStart","_showGrid","onChange","slider","straighten","onEnd","_hideGrid","_cleanupFocalPointAfterStraighten","keyCode","SHIFT_KEY","constraintMenu","MenuBtn","onOptionSelect","option","setCroppingConstraint","enforceCroppingConstraint","menu","_handleTabClick","$tab","currentTarget","view","showView","$view","filter","enableSlider","disableSlider","disableCropMode","enableCropMode","zoomFactor","degrees","parseInt","imageZoomRatio","newAngle","angle","viewportProperties","imageProperties","angleInRadians","PI","newDeltaX","cos","sin","newDeltaY","modifiedDeltaX","modifiedDeltaY","temp","animate","duration","animationDuration","onComplete","cleanAngle","parseFloat","_adjustFocalPointByAngle","_resetFocalPointPosition","axis","editorCenter","setValue","properties","scaleY","scaleX","previousAngle","allowDegreeFractions","value","_adjustEditorElementsOnStraighten","newCenterX","newCenterY","angleDelta","currentZoomRatio","adjustmentRatio","cropperCenterX","cropperCenterY","imageVertices","getImageVerticeCoords","rectangle","_getZoomRatioToFitRectangle","_isCenterInside","opacity","object","containingObject","newFocalX","newFocalY","adjustedFocalX","adjustedFocalY","containingVertices","vertex","rectangleVertices","_getRectangleVertices","verticeIndex","length","arePointsInsideRectangle","edge","_getEdgeCrossed","rectangleCenter","distanceFromVertexToEdge","abs","sqrt","pow","distanceFromCenterToEdge","$button","hasClass","append","postData","imageRotation","replace","cropData","zoom","find","end","error","onSave","hide","scaledWidth","scaledHeight","boundingBox","_getImageBoundingBox","scale","vertScale","horiScale","getCombinedZoomRatio","i","strokeOptions","lineCount","gridWidth","gridHeight","xStep","yStep","push","Line","onFadeOut","destroy","show","removeAllListeners","callback","cropperData","_showCropper","_editorModeTransition","_hideCropper","targetZoom","inverseZoomFactor","imageOffsetX","imageOffsetY","clipperData","_setupCropperLayer","_redrawCropperElements","backgroundColor","hoverCursor","selection","position","rectangleRatio","rectWidth","rectHeight","lineOptions","gridOptions","pathGroup","Path","previousImageArea","currentOffset","currentArea","areaFactor","coordinateSet","a","b","c","d","_isMouseOver","move","handle","_cropperHandleHitTest","pageX","pageY","_handleFocalDrag","_handleCropperDrag","_handleCropperResize","_setMouseCursor","vertices","newX","newY","constraint","previousHeight","previousWidth","topDelta","leftDelta","change","match","cursor","parentOffset","offset","mouseX","mouseY","lb","rb","tb","bb","event","topLeft","topRight","bottomRight","bottomLeft","zoomMode","topVerticalSegment","bottomVerticalSegment","rightHorizontalSegment","leftHorizontalSegment","verticalOffset","horizontalOffset","_debug","fabricObj","debugger","points","ab","_getVector","bc","scalarAbAb","_getScalarProduct","scalarBcBc","point","ap","bp","scalarAbAp","scalarBcBp","projectsOnAB","projectsOnBC","_getVectorMagnitude","vector","_getAngleBetweenVectors","acos","edgePoints","centerPoint","smallestDiff","edgeCrossed","edgeIndex","toCenter","edgeVector","toVertex","diff","box","proportion","noop"],"mappings":"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","file":"AssetImageEditor.min.js"}